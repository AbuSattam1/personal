<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مجموعة جامعة الملك خالد</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f8ff;
        }

        /* القائمة الجانبية */
        .sidebar {
            width: 250px;
            background-color: #006400;
            color: white;
            height: 100vh;
            position: fixed;
            top: 0;
            left: -250px; /* مخفية في البداية */
            padding: 20px;
            transition: left 0.3s;
            z-index: 1000;
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        .sidebar a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .sidebar a:hover {
            background-color: #004b33;
        }

        /* زر القائمة */
        .menu-icon {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #006400;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1100;
        }

        /* المحتوى */
        .content {
            padding: 20px;
        }

        .page {
            display: none; /* جميع الصفحات مخفية افتراضياً */
        }

        .page.active {
            display: block; /* الصفحة النشطة فقط مرئية */
        }

        /* تنسيقات خاصة بحساب الغياب */
        h1 {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 20px;
            text-align: center;
        }

        .container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 450px;
            margin: auto;
        }

        input, select, button {
            width: 100%;
            padding: 12px;
            margin: 12px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 16px;
        }

        button {
            background-color: #2c3e50;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #1a252f;
        }

        .result {
            margin-top: 20px;
            font-weight: bold;
        }

        .warning1 { color: #ff9800; }
        .warning2 { color: #e91e63; text-decoration: underline; }
        .warning3 { color: #d32f2f; font-weight: bold; }
        canvas {
            margin-top: 30px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- زر القائمة -->
    <button class="menu-icon" onclick="toggleSidebar()">☰</button>

    <!-- القائمة الجانبية -->
    <div class="sidebar" id="sidebar">
        <h2>القائمة الجانبية</h2>
        <a href="#home" onclick="showPage('home')">الصفحة الرئيسية</a>
        <a href="#absence" onclick="showPage('absence')">أحسب غيابك</a>
    </div>

    <!-- المحتوى -->
    <div class="content">
        <!-- الصفحة الرئيسية -->
        <div id="home" class="page active">
            <h1>مرحباً بك في موقع جامعة الملك خالد</h1>
            <p>صفحة رئيسية للمحتوى العام.</p>
        </div>

        <!-- صفحة حساب الغياب -->
        <div id="absence" class="page">
            <h1>حساب الغياب</h1>
            <div class="container">
                <label for="attendance">نسبة الغياب لمادة واحدة (%)</label>
                <input type="number" id="attendance" placeholder="أدخل نسبة الغياب" step="0.01">

                <label for="type">نوع التخصص</label>
                <select id="type">
                    <option value="normal">تخصص عادي</option>
                    <option value="health">التخصصات الصحية والمسار الهندسي</option>
                </select>

                <button onclick="calculateAbsence()">احسب نسبة الغياب</button>
                <div class="result" id="result"></div>
                <canvas id="absenceChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // إظهار وإخفاء القائمة الجانبية
        function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            if (sidebar.style.left === "0px") {
                sidebar.style.left = "-250px";
            } else {
                sidebar.style.left = "0px";
            }
        }

        // عرض الصفحة المحددة
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            toggleSidebar(); // إغلاق القائمة بعد الاختيار
        }

        // حساب الغياب
        let absenceChart;

        function calculateAbsence() {
            const attendance = parseFloat(document.getElementById("attendance").value);
            const type = document.getElementById("type").value;
            const maxAbsence = type === "normal" ? 25 : 20;

            if (!attendance || attendance < 0) {
                alert("يرجى إدخال نسبة غياب صحيحة.");
                return;
            }

            const remainingDays = Math.floor(maxAbsence / attendance);
            let warning = "";
            let warningClass = "";

            if (attendance >= 10 && attendance < 15) {
                warning = "تنبيه: وصلت إلى الإنذار الأول (10%)";
                warningClass = "warning1";
            } else if (attendance >= 15 && attendance < maxAbsence) {
                warning = "تنبيه: وصلت إلى الإنذار الثاني (15%)";
                warningClass = "warning2";
            } else if (attendance >= maxAbsence) {
                warning = "تحذير: متوقع حرمانك راجع دكتور المادة!";
                warningClass = "warning3";
            }

            document.getElementById("result").innerHTML = `
                <p>نسبة الغياب: ${attendance}%</p>
                <p>متبقي لك ${remainingDays} محاضرة قبل الوصول للحرمان.</p>
                <p class="${warningClass}">${warning}</p>
            `;

            updateChart(attendance, maxAbsence);
        }

        function updateChart(attendance, maxAbsence) {
            const ctx = document.getElementById('absenceChart').getContext('2d');
            if (absenceChart) absenceChart.destroy();
            absenceChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['نسبة الغياب', 'المتبقي'],
                    datasets: [{
                        data: [attendance, maxAbsence - attendance],
                        backgroundColor: ['#FF6347', '#90EE90']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: { enabled: true }
                    }
                }
            });
        }
    </script>
</body>
</html>
